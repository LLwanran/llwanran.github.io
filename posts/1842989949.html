<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Javascript常用的设计模式 | 婉然一笑 - Li的兰花指</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Javascript常用的设计模式</h1><a id="logo" href="/.">婉然一笑 - Li的兰花指</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Javascript常用的设计模式</h1><div class="post-meta">Jan 22, 2018<span> | </span><span class="category"><a href="/categories/前端/">前端</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="post-content"><h6 id="使用ES6实现"><a href="#使用ES6实现" class="headerlink" title="使用ES6实现"></a>使用ES6实现</h6><h1 id="设计模式分为三种类型，共23种"><a href="#设计模式分为三种类型，共23种" class="headerlink" title="设计模式分为三种类型，共23种"></a>设计模式分为三种类型，共23种</h1><ul>
<li>创建型模式：<a href="#Signleton">单例模式</a>、<a href="#AbstractFactory">抽象工厂模式</a>、<a href="#Builder">建造者模式</a>、<a href="#Factory">工厂模式</a>、<a href="#Prototype">原型模式</a>。</li>
<li>结构型模式：<a href="#Adapter">适配器模式</a>、<a href="#Bridge">桥接模式</a>、<a href="#Decorator">装饰模式</a>、<a href="#Composite">组合模式</a>、<a href="#Facade">外观模式</a>、<a href="#Flyweight">享元模式</a>、<a href="#Proxy">代理模式</a>。</li>
<li>行为型模式：<a href="#Template_Method">模版方法模式</a>、<a href="#Command">命令模式</a>、<a href="#Iterator">迭代器模式</a>、<a href="#Observer">观察者模式</a>、<a href="#Mediator">中介者模式</a>、<a href="#Memento">备忘录模式</a>、<a href="#Interpreter">解释器模式（Interpreter模式）</a>、<a href="#State">状态模式</a>、<a href="#Strategy">策略模式</a>、<a href="#Chain_Of_Responsibility">职责链模式(责任链模式)</a>、<a href="#Visitor">访问者模式</a>。</li>
</ul>
<h3 id="创建型模式："><a href="#创建型模式：" class="headerlink" title="创建型模式："></a>创建型模式：</h3><ul>
<li><a name="Signleton">Signleton（单例模式）：</a>保证一个类仅有一个实例，并提供一个访问它的全局访问点。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># Signleton.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(data) &#123;</span><br><span class="line">        <span class="keyword">if</span> (Singleton.prototype.Instance === <span class="literal">undefined</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.data = data;</span><br><span class="line">            Singleton.prototype.Instance = <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Singleton.prototype.Instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> ob1 = <span class="keyword">new</span> Singleton(<span class="string">"one"</span>);</span><br><span class="line"><span class="keyword">let</span> ob2 = <span class="keyword">new</span> Singleton(<span class="string">"two"</span>);</span><br><span class="line"><span class="keyword">let</span> ob3 = <span class="keyword">new</span> Singleton(<span class="string">"Three"</span>);</span><br><span class="line">ob2.init = <span class="string">'Object flg'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(ob1 === ob2);</span><br><span class="line"><span class="built_in">console</span>.log(ob1 === ob3);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(ob1);</span><br><span class="line"><span class="built_in">console</span>.log(ob2);</span><br><span class="line"><span class="built_in">console</span>.log(ob3);</span><br></pre></td></tr></table></figure>
<ul>
<li><a name="AbstractFactory">AbstractFactory（抽象工厂模式）：</a>提供一个创建一系列相关或相互依赖对象的接口，而无需指定它们具体的类。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"># AbstractFactory.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AbstractFactory</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"AbstractFactory class created"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    createProductA(product) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"AbstractFactory.createProductA created"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    createProductB(product) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"AbstractFactory.createProductB created"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteFactory1</span> <span class="keyword">extends</span> <span class="title">AbstractFactory</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"ConcreteFactory1 class created"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    createProductA(product) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteFactory1 createProductA'</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ProductA1();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    createProductB(product) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteFactory1 createProductB'</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ProductB1();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteFactory2</span> <span class="keyword">extends</span> <span class="title">AbstractFactory</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"ConcreteFactory2 class created"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    createProductA(product) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteFactory2 createProductA'</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ProductA2();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    createProductB(product) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteFactory2 createProductB'</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ProductB2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AbstractProductA</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'AbstractProductA class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AbstractProductB</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'AbstractProductB class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductA1</span> <span class="keyword">extends</span> <span class="title">AbstractProductA</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ProductA1 class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductA2</span> <span class="keyword">extends</span> <span class="title">AbstractProductA</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ProductA2 class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductB1</span> <span class="keyword">extends</span> <span class="title">AbstractProductB</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ProductB1 class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductB2</span> <span class="keyword">extends</span> <span class="title">AbstractProductB</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ProductB2 class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> factory1 = <span class="keyword">new</span> ConcreteFactory1();</span><br><span class="line"><span class="keyword">var</span> productB1 = factory1.createProductB();</span><br><span class="line"><span class="keyword">var</span> productA1 = factory1.createProductA();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> factory2 = <span class="keyword">new</span> ConcreteFactory2();</span><br><span class="line"><span class="keyword">var</span> productA2 = factory2.createProductA();</span><br><span class="line"><span class="keyword">var</span> productB2 = factory2.createProductB();</span><br></pre></td></tr></table></figure>
<ul>
<li><a name="Builder">Builder（建造者模式）：</a>将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"># Builder.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Builder</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Builder Class created!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    buildPart(partName) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Builder.buildPart invoked!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteBuilder</span> <span class="keyword">extends</span> <span class="title">Builder</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteBuilder Class created!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    buildPart(partName) &#123;</span><br><span class="line">        <span class="keyword">super</span>.buildPart(partName);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteBuilder.buildPart invoked!'</span>);</span><br><span class="line">        <span class="keyword">this</span>.product = <span class="keyword">new</span> Product(partName);</span><br><span class="line">    &#125;</span><br><span class="line">    getResult() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteBuilder.getResult invoked!'</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.product;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(material) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"Product class created"</span>);</span><br><span class="line">        <span class="keyword">this</span>.data = material</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Director</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>.structure = [<span class="string">'Prod1'</span>, <span class="string">'Prod2'</span>, <span class="string">'Prod3'</span>];</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"Director class created"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    construct() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"Director.Construct created"</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> prodName <span class="keyword">in</span> <span class="keyword">this</span>.structure) &#123;</span><br><span class="line">            <span class="keyword">let</span> builder = <span class="keyword">new</span> ConcreteBuilder();</span><br><span class="line">            builder.buildPart(<span class="keyword">this</span>.structure[prodName]);</span><br><span class="line">            builder.getResult();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> director = <span class="keyword">new</span> Director();</span><br><span class="line">director.construct();</span><br></pre></td></tr></table></figure>
<ul>
<li><a name="Factory">Factory（工厂模式）：</a>定义一个用于创建对象的接口，让子类决定将哪一个类实例化。Factory Method使一个类的实例化延迟到其子类。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"># Factory.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Product Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteProduct</span> <span class="keyword">extends</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteProduct Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Creator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Creator Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    factoryMethod() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Creator.factoryMethod created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    anOperation() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Creator.anOperation created'</span>);</span><br><span class="line">        <span class="keyword">this</span>.product = <span class="keyword">this</span>.factoryMethod();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.product <span class="keyword">instanceof</span> ConcreteProduct);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteCreator</span> <span class="keyword">extends</span> <span class="title">Creator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteCreator Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    factoryMethod() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ConcreteProduct();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> factory = <span class="keyword">new</span> ConcreteCreator();</span><br><span class="line">factory.anOperation();</span><br></pre></td></tr></table></figure>
<ul>
<li><a name="Prototype">Prototype（原型模式）：</a>用原型实例指定创建对象的种类，并且通过拷贝这个原型来创建新的对象。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"># Prototype.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Prototype</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(prototype) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"Prototype Class created"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    setFeature(key, val) &#123;</span><br><span class="line">        <span class="keyword">this</span>[key] = val</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    clone() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"Prototype.clone invoked"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcretePrototype1</span> <span class="keyword">extends</span> <span class="title">Prototype</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"ConcretePrototype1 created"</span>);</span><br><span class="line">        <span class="keyword">this</span>.feature = <span class="string">"feature 1"</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    clone() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcretePrototype1.clone invoked'</span>);</span><br><span class="line">        <span class="keyword">let</span> clone = <span class="keyword">new</span> ConcretePrototype1();</span><br><span class="line">        <span class="keyword">let</span> keys = <span class="built_in">Object</span>.keys(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        keys.forEach(<span class="function"><span class="params">k</span> =&gt;</span> clone.setFeature(k, <span class="keyword">this</span>[k]));</span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"ConcretePrototype1 cloned"</span>);</span><br><span class="line">        <span class="keyword">return</span> clone;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcretePrototype2</span> <span class="keyword">extends</span> <span class="title">Prototype</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"ConcretePrototype2 created"</span>);</span><br><span class="line">        <span class="keyword">this</span>.feature = <span class="string">"feature 2"</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    clone() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcretePrototype2.Clone function'</span>);</span><br><span class="line">        <span class="keyword">let</span> clone = <span class="keyword">new</span> ConcretePrototype2();</span><br><span class="line">        <span class="keyword">let</span> keys = <span class="built_in">Object</span>.keys(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">        keys.forEach(<span class="function"><span class="params">k</span> =&gt;</span> clone.setFeature(k, <span class="keyword">this</span>[k]));</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"ConcretePrototype2 cloned"</span>);</span><br><span class="line">        <span class="keyword">return</span> clone;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> proto1 = <span class="keyword">new</span> ConcretePrototype1();</span><br><span class="line">proto1.setFeature(<span class="string">'feature'</span>, <span class="string">"feature 11"</span>);</span><br><span class="line"><span class="keyword">var</span> clone1 = proto1.clone();</span><br><span class="line"><span class="built_in">console</span>.log(clone1.feature);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> clone1);</span><br><span class="line"><span class="built_in">console</span>.log(clone1 === proto1);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> proto2 = <span class="keyword">new</span> ConcretePrototype2();</span><br><span class="line">proto2.setFeature(<span class="string">'feature'</span>, <span class="string">"feature 22"</span>);</span><br><span class="line"><span class="keyword">var</span> clone2 = proto2.clone();</span><br><span class="line"><span class="built_in">console</span>.log(clone2.feature);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> clone2);</span><br><span class="line"><span class="built_in">console</span>.log(clone2 === proto2);</span><br></pre></td></tr></table></figure>
<h3 id="结构型模式："><a href="#结构型模式：" class="headerlink" title="结构型模式："></a>结构型模式：</h3><ul>
<li><a name="Adapter">Adapter（适配器模式）：</a>将一个类的接口转换成客户希望的另外一个接口。Adapter模式使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"># Adapter.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Target</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(type) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Target Class created!'</span>);</span><br><span class="line">        <span class="keyword">let</span> result = <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">'adapter'</span>:</span><br><span class="line">                result = <span class="keyword">new</span> AdapterImpl();</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                result = <span class="literal">undefined</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    request() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Target.request invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Adapter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Adapter Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    specificRequest() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Adapter.specificRequest invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AdapterImpl</span> <span class="keyword">extends</span> <span class="title">Adapter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>()</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'AdapterImpl Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    request() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'AdapterImpl.request invoked'</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.specificRequest();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> Target(<span class="string">"adapter"</span>);</span><br><span class="line">f.request();</span><br></pre></td></tr></table></figure>
<ul>
<li><a name="Bridge">Bridge（桥接模式）：</a>将抽象部分与它的实现部分分离，使它们都可以独立地变化。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"># Bridge.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Abstraction</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Abstraction Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    operation() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Abstraction.operation invoked'</span>);</span><br><span class="line">        <span class="keyword">this</span>.imp.operationImp();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RefinedAbstraction</span> <span class="keyword">extends</span> <span class="title">Abstraction</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>()</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'RefinedAbstraction Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    setImp(imp) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'RefinedAbstraction.setImp invoked'</span>);</span><br><span class="line">        <span class="keyword">this</span>.imp = imp</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Implementor</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Implementor Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    operationImp() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Implementor.operationImp invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteImplementorA</span> <span class="keyword">extends</span> <span class="title">Implementor</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>()</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteImplementorA Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    operationImp() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteImplementorA.operationImp invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteImplementorB</span> <span class="keyword">extends</span> <span class="title">Implementor</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>()</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteImplementorB Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    operationImp() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteImplementorB.operationImp invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> abstraction = <span class="keyword">new</span> RefinedAbstraction();</span><br><span class="line">abstraction.setImp(<span class="keyword">new</span> ConcreteImplementorA());</span><br><span class="line">abstraction.operation();</span><br><span class="line">abstraction.setImp(<span class="keyword">new</span> ConcreteImplementorB());</span><br><span class="line">abstraction.operation();</span><br></pre></td></tr></table></figure>
<ul>
<li><a name="Composite">Composite（组合模式）：</a>将对象组合成树形结构以表示“部分-整体”的层次结构。它使得客户对单个对象和复合对象的使用具有一致性。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"># Composite.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Component Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    operation() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Component.operation invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    add(Component) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Component.add invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    remove(Component) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Component.remove invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    getChild(key) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Component.getChild invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Leaf</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Leaf Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    operation() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Leaf.operation invoked'</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Composite</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.children = [];</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Composite Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    operation() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Composite operation for: '</span> + <span class="keyword">this</span>.name)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> <span class="keyword">this</span>.children) &#123;</span><br><span class="line">            <span class="keyword">this</span>.children[i].operation();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    add(Component) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Composite.add invoked'</span>);</span><br><span class="line">        <span class="keyword">this</span>.children.push(Component);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    remove(Component) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Composite.remove invoked'</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> <span class="keyword">this</span>.children) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.children[i] === Component) &#123;</span><br><span class="line">                <span class="keyword">this</span>.children.splice(i, <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    getChild(key) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Composite.getChild invoked'</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.children[key];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> composite1 = <span class="keyword">new</span> Composite(<span class="string">'C1'</span>);</span><br><span class="line">composite1.add(<span class="keyword">new</span> Leaf(<span class="string">'L1'</span>));</span><br><span class="line">composite1.add(<span class="keyword">new</span> Leaf(<span class="string">'L2'</span>));</span><br><span class="line"><span class="keyword">var</span> composite2 = <span class="keyword">new</span> Composite(<span class="string">'C2'</span>);</span><br><span class="line">composite2.add(composite1);</span><br><span class="line">composite1.getChild(<span class="number">1</span>).operation();</span><br><span class="line">composite2.operation();</span><br></pre></td></tr></table></figure>
<ul>
<li><a name="Decorator">Decorator（装饰模式）：</a>动态地给一个对象添加一些额外的职责。就扩展功能而言， 它比生成子类方式更为灵活。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"># Decorator.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Component Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    operation() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Component.operation invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteComponent Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    operation() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteComponent.operation invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Decorator</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(component) &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.component = component;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Decorator Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    operation() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Decorator.operation invoked'</span>);</span><br><span class="line">        <span class="keyword">this</span>.component.operation()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteDecoratorA</span> <span class="keyword">extends</span> <span class="title">Decorator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(component, sign) &#123;</span><br><span class="line">        <span class="keyword">super</span>(component);</span><br><span class="line">        <span class="keyword">this</span>.addedState = sign;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteDecoratorA Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    operation() &#123;</span><br><span class="line">        <span class="keyword">super</span>.operation();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteDecoratorA.operation invoked'</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.addedState)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteDecoratorB</span> <span class="keyword">extends</span> <span class="title">Decorator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(component, sign) &#123;</span><br><span class="line">        <span class="keyword">super</span>(component);</span><br><span class="line">        <span class="keyword">this</span>.addedState = sign;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteDecoratorB Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    operation() &#123;</span><br><span class="line">        <span class="keyword">super</span>.operation();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteDecoratorB.operation invoked'</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.addedState + <span class="keyword">this</span>.addedState + <span class="keyword">this</span>.addedState + <span class="keyword">this</span>.addedState + <span class="keyword">this</span>.addedState);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    addedBehavior() &#123;</span><br><span class="line">        <span class="keyword">this</span>.operation();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteDecoratorB.operation invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> component = <span class="keyword">new</span> ConcreteComponent();</span><br><span class="line"><span class="keyword">var</span> decoratorA = <span class="keyword">new</span> ConcreteDecoratorA(component, <span class="string">'decoratorA'</span>);</span><br><span class="line"><span class="keyword">var</span> decoratorB = <span class="keyword">new</span> ConcreteDecoratorB(component, <span class="string">'decoratorB'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'component: '</span>);</span><br><span class="line">component.operation();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'decoratorA: '</span>);</span><br><span class="line">decoratorA.operation();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'decoratorB: '</span>);</span><br><span class="line">decoratorB.addedBehavior();</span><br></pre></td></tr></table></figure>
<ul>
<li><a name="Facade">Facade（外观模式）：</a>为子系统中的一组接口提供一个一致的界面，Facade模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"># Facade.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Facade</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"Facade class created"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    gotoPage(dp) &#123;</span><br><span class="line">        <span class="keyword">switch</span> (dp) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Facade"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the Facade"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"AbstractFactory"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the AbstractFactory"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Builder"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the Builder"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Factory"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the Factory"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Prototype"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the Prototype"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Singleton"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the Singleton"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Adapter"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the Adapter"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Bridge"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the Bridge"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Composite"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the Composite"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Decorator"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the Decorator"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Flyweight"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the Flyweight"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Proxy"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the Proxy"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"ChainofResponsibility"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the ChainofResponsibility"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Command"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the Command"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Interpreter"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the Interpreter"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Iterator"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the Iterator"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Mediator"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the Mediator"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Memento"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the Memento"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Observer"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the Observer"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"State"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the State"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Strategy"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the Strategy"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"TemplateMethod"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the TemplateMethod"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"Visitor"</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"This is the Visitor"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"nothing to be matched"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> facade = <span class="keyword">new</span> Facade();</span><br><span class="line">facade.gotoPage(<span class="string">'Facade'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'AbstractFactory'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'Builder'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'Factory'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'Prototype'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'Singleton'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'Adapter'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'Bridge'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'Composite'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'Decorator'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'Flyweight'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'Proxy'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'ChainofResponsibility'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'Command'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'Interpreter'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'Iterator'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'Mediator'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'Memento'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'Observer'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'State'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'Strategy'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'TemplateMethod'</span>);</span><br><span class="line">facade.gotoPage(<span class="string">'Visitor'</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li><a name="Flyweight">Flyweight（享元模式）：</a>运用共享技术有效地支持大量细粒度的对象。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"># Flyweight.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FlyweightFactory</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>.flyweights = &#123;&#125;;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'FlyweightFactory Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    getFlyweight(key) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'FlyweightFactory.getFlyweight invoked'</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.flyweights[key]) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.flyweights[key];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.flyweights[key] = <span class="keyword">new</span> ConcreteFlyweight(key);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.flyweights[key];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    createGibberish(keys) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'FlyweightFactory.createGibberish invoked'</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> UnsharedConcreteFlyweight(keys, <span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Flyweight</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Flyweight Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    operation(extrinsicState) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Flyweight.operation invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteFlyweight</span> <span class="keyword">extends</span> <span class="title">Flyweight</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(key) &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.intrinsicState = key;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteFlyweight Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    operation(extrinsicState) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteFlyweight.operation invoked'</span>);</span><br><span class="line">        <span class="keyword">return</span> extrinsicState + <span class="keyword">this</span>.intrinsicState;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UnsharedConcreteFlyweight</span> <span class="keyword">extends</span> <span class="title">Flyweight</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(keys, flyweights) &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.flyweights = flyweights;</span><br><span class="line">        <span class="keyword">this</span>.keys = keys;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'UnsharedConcreteFlyweight Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    operation(extrinsicState) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'UnsharedConcreteFlyweight.operation invoked'</span>);</span><br><span class="line">        <span class="keyword">var</span> key, word = <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; extrinsicState; i++) &#123;</span><br><span class="line">            key = <span class="keyword">this</span>.keys[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (<span class="keyword">this</span>.keys.length))];</span><br><span class="line">            word = <span class="keyword">this</span>.flyweights.getFlyweight(key).operation(word);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'UnsharedConcreteFlyweight Operation: '</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(word);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> flyweights = <span class="keyword">new</span> FlyweightFactory();</span><br><span class="line"><span class="keyword">var</span> gibberish = flyweights.createGibberish([<span class="string">'-'</span>, <span class="string">'+'</span>, <span class="string">'*'</span>]);</span><br><span class="line">gibberish.operation(<span class="number">5</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li><a name="Proxy">Proxy（（代理模式）：</a>为其他对象提供一个代理以控制对这个对象的访问。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"># Proxy.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Subject Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    request() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Subject.request invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RealSubject</span> <span class="keyword">extends</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>()</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'RealSubject Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    request() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'RealSubject.request invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Proxy</span> <span class="keyword">extends</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>()</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Proxy Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    request() &#123;</span><br><span class="line">        <span class="keyword">this</span>.realSubject = <span class="keyword">new</span> RealSubject();</span><br><span class="line">        <span class="keyword">this</span>.realSubject.request();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> proxy = <span class="keyword">new</span> <span class="built_in">Proxy</span>()</span><br><span class="line">proxy.request()</span><br></pre></td></tr></table></figure>
<h3 id="行为型模式："><a href="#行为型模式：" class="headerlink" title="行为型模式："></a>行为型模式：</h3><ul>
<li><a name="Chain_Of_Responsibility">Chain of Responsibility（责任链模式）：</a>为解除请求的发送者和接收者之间耦合，而使多个对象都有机会处理这个请求。将这些对象连成一条链，并沿着这条链传递该请求，直到有一个对象处理它。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"># Chain of Responsibility.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Handler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Handler Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handleRequest() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Handler.handleRequest invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteHandler1</span> <span class="keyword">extends</span> <span class="title">Handler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteHandler1 Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    setSuccessor(successor) &#123;</span><br><span class="line">        <span class="keyword">this</span>.successor = successor;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteHandler1.setSuccessor invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handleRequest(request) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteHandler1.handleRequest invoked'</span>);</span><br><span class="line">        <span class="keyword">if</span> (request === <span class="string">'run'</span>)</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'ConcreteHandler1 has handled the request'</span>);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'ConcreteHandler1 calls his successor'</span>);</span><br><span class="line">            <span class="keyword">this</span>.successor.handleRequest(request);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteHandler2</span> <span class="keyword">extends</span> <span class="title">Handler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteHandler2 Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handleRequest(request) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteHandler2.handleRequest invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> handle1 = <span class="keyword">new</span> ConcreteHandler1();</span><br><span class="line"><span class="keyword">let</span> handle2 = <span class="keyword">new</span> ConcreteHandler2();</span><br><span class="line">handle1.setSuccessor(handle2);</span><br><span class="line">handle1.handleRequest(<span class="string">'run'</span>);</span><br><span class="line">handle1.handleRequest(<span class="string">'stay'</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li><a name="Command">Command（命令模式）：</a>将一个请求封装为一个对象，从而使你可用不同的请求对客户进行参数化；对请求排队或记录请求日志，以及支持可取消的操作。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"># Command.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Invoker</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Invoker Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    storeCommand(command) &#123;</span><br><span class="line">        <span class="keyword">this</span>.command = command;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Invoker.storeCommand invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Command</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Command Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    execute() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Command.execute invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteCommand</span> <span class="keyword">extends</span> <span class="title">Command</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(receiver, state) &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.receiver = receiver;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteCommand Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    execute() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteCommand.execute invoked'</span>);</span><br><span class="line">        <span class="keyword">this</span>.receiver.action();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Receiver</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Receiver Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    action() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Receiver.action invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> invoker = <span class="keyword">new</span> Invoker();</span><br><span class="line"><span class="keyword">var</span> receiver = <span class="keyword">new</span> Receiver();</span><br><span class="line"><span class="keyword">var</span> command = <span class="keyword">new</span> ConcreteCommand(receiver);</span><br><span class="line">invoker.storeCommand(command);</span><br><span class="line">invoker.command.execute();</span><br></pre></td></tr></table></figure>
<ul>
<li><a name="Interpreter">Interpreter（解释器模式）：</a>给定一个语言, 定义它的文法的一种表示，并定义一个解释器, 该解释器使用该表示来解释语言中的句子。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"># Interpreter.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Context</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(input) &#123;</span><br><span class="line">        <span class="keyword">this</span>.sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.list = [];</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Context Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    add(eps) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Context.add invoked'</span>);</span><br><span class="line">        <span class="keyword">this</span>.list.push(eps);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    getList() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Context.getList invoked'</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    getSum() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Context.getSum invoked'</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    setSum(_sum) &#123;</span><br><span class="line">        <span class="keyword">this</span>.sum = _sum;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Context.setSum invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AbstractExpression</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'AbstractExpression Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    interpret(context) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'AbstractExpression.interpret invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PlusExpression</span> <span class="keyword">extends</span> <span class="title">AbstractExpression</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'PlusExpression Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    interpret(context) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'PlusExpression.interpret invoked'</span>);</span><br><span class="line">        <span class="keyword">var</span> sum = context.getSum();</span><br><span class="line">        sum++;</span><br><span class="line">        context.setSum(sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MinusExpression</span> <span class="keyword">extends</span> <span class="title">AbstractExpression</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.name = <span class="string">'+'</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'MinusExpression Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    interpret(context) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'MinusExpression.interpret invoked'</span>);</span><br><span class="line">        <span class="keyword">var</span> sum = context.getSum();</span><br><span class="line">        sum--;</span><br><span class="line">        context.setSum(sum)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> context = <span class="keyword">new</span> Context();</span><br><span class="line">context.setSum(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">context.add(<span class="keyword">new</span> PlusExpression());</span><br><span class="line">context.add(<span class="keyword">new</span> PlusExpression());</span><br><span class="line">context.add(<span class="keyword">new</span> PlusExpression());</span><br><span class="line"></span><br><span class="line">context.add(<span class="keyword">new</span> MinusExpression());</span><br><span class="line">context.add(<span class="keyword">new</span> MinusExpression());</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> list = context.getList();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> expression = list[i];</span><br><span class="line">    expression.interpret(context);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Result："</span> + context.getSum());</span><br></pre></td></tr></table></figure>
<ul>
<li><a name="Iterator">Iterator（迭代器模式）：</a>提供一种方法顺序访问一个聚合对象中各个元素，而又不需暴露该对象的内部表示。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"># Iterator.js</span><br><span class="line"></span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Iterator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Iterator Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    first() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Iterator.first invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    next() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Iterator.next invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    isDone() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Iterator.isDone invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    currentItem() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Iterator.currentItem invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteIterator</span> <span class="keyword">extends</span> <span class="title">Iterator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(aggregate) &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.aggregate = aggregate;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteIterator Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    first() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteIterator.first invoked'</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.aggregate.list[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    next() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteIterator.next invoked'</span>);</span><br><span class="line">        <span class="keyword">this</span>.index += <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.aggregate.list[<span class="keyword">this</span>.index];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    currentItem() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteIterator.currentItem invoked'</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.aggregate.list[<span class="keyword">this</span>.index];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Aggregate</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Aggregate Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    createIterator() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Aggregate.CreateIterator invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteAggregate</span> <span class="keyword">extends</span> <span class="title">Aggregate</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(list) &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.list = list;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteAggregate Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    createIterator() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteAggregate.CreateIterator invoked'</span>);</span><br><span class="line">        <span class="keyword">this</span>.iterator = <span class="keyword">new</span> ConcreteIterator(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> aggregate = <span class="keyword">new</span> ConcreteAggregate([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]);</span><br><span class="line">aggregate.createIterator();</span><br><span class="line"><span class="built_in">console</span>.log(aggregate.iterator.first());</span><br><span class="line"><span class="built_in">console</span>.log(aggregate.iterator.next());</span><br><span class="line"><span class="built_in">console</span>.log(aggregate.iterator.currentItem());</span><br></pre></td></tr></table></figure>
<ul>
<li><a name="Mediator">Mediator（中介者模式）：</a>用一个中介对象来封装一系列的对象交互。中介者使各对象不需要显式地相互引用，从而使其耦合松散，而且可以独立地改变它们之间的交互。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"># Mediator.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mediator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Mediator Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    colleagueChanged(colleague) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Mediator.colleagueChanged invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteMediator</span> <span class="keyword">extends</span> <span class="title">Mediator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteMediator Class created'</span>);</span><br><span class="line">        <span class="keyword">this</span>.colleague1 = <span class="keyword">new</span> ConcreteColleague1(<span class="keyword">this</span>);</span><br><span class="line">        <span class="keyword">this</span>.colleague2 = <span class="keyword">new</span> ConcreteColleague2(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    colleagueChanged(colleague) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteMediator.colleagueChanged invoked'</span>);</span><br><span class="line">        <span class="keyword">switch</span> (colleague) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="keyword">this</span>.colleague1:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'ConcreteColleague1 has Changed -&gt; change ConcreteColleague2.feature: '</span>);</span><br><span class="line">                <span class="keyword">this</span>.colleague2.setFeature(<span class="string">'new feature 2'</span>);</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">case</span> <span class="keyword">this</span>.colleague2:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'ConcreteColleague2 has Changed, but do nothing'</span>);</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'Do nothing'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Colleague</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Colleague Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    changed() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Colleague.changed invoked'</span>);</span><br><span class="line">        <span class="keyword">this</span>.mediator.colleagueChanged(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteColleague1</span> <span class="keyword">extends</span> <span class="title">Colleague</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(mediator) &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteColleague1 Class created'</span>);</span><br><span class="line">        <span class="keyword">this</span>.mediator = mediator;</span><br><span class="line">        <span class="keyword">this</span>.feature = <span class="string">"feature 1"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    setFeature(feature) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteColleague1.setFeature invoked'</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteColleague1 Feature has changed from '</span> + <span class="keyword">this</span>.feature + <span class="string">' to '</span> + feature)</span><br><span class="line">        <span class="keyword">this</span>.feature = feature;</span><br><span class="line">        <span class="keyword">this</span>.changed();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteColleague2</span> <span class="keyword">extends</span> <span class="title">Colleague</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(mediator) &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteColleague2 Class created'</span>);</span><br><span class="line">        <span class="keyword">this</span>.mediator = mediator;</span><br><span class="line">        <span class="keyword">this</span>.feature = <span class="string">"feature 2"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    setFeature(feature) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteColleague2.setFeature invoked'</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteColleague2 Feature has changed from '</span> + <span class="keyword">this</span>.feature + <span class="string">' to '</span> + feature);</span><br><span class="line">        <span class="keyword">this</span>.feature = feature;</span><br><span class="line">        <span class="keyword">this</span>.changed();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mediator = <span class="keyword">new</span> ConcreteMediator();</span><br><span class="line">mediator.colleague1.setFeature(<span class="string">"new feature 1"</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li><a name="Memento">Memento（备忘录模式）：</a>在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态。这样以后就可将该对象恢复到保存的状态。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"># Memento.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Originator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Originator Class created'</span>);</span><br><span class="line">        <span class="keyword">this</span>.state = <span class="string">'a'</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Originator created. State= '</span> + <span class="keyword">this</span>.state);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    setMemento(Memento) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Originator.setMemento invoked'</span>);</span><br><span class="line">        <span class="keyword">this</span>.state = Memento.getState();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Originator.setMemento State= '</span> + <span class="keyword">this</span>.state);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    createMemento(state) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Originator.createMemento invoked'</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Memento(state);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Memento</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(state) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Memento Class created'</span>);</span><br><span class="line">        <span class="keyword">this</span>.state = state;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Memento created. State= '</span> + <span class="keyword">this</span>.state);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    getState() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Memento.getState invoked'</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.state;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    setState(state) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Memento.setState invoked'</span>);</span><br><span class="line">        <span class="keyword">this</span>.state = state;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Caretaker</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Caretaker Class created'</span>);</span><br><span class="line">        <span class="keyword">this</span>.mementos = [];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    addMemento(memento) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Caretaker.addMemento invoked'</span>);</span><br><span class="line">        <span class="keyword">this</span>.mementos.push(memento)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    setMemento() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Caretaker.setMemento invoked'</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.mementos[<span class="keyword">this</span>.mementos.length - <span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> caretaker = <span class="keyword">new</span> Caretaker();</span><br><span class="line"><span class="keyword">let</span> originator = <span class="keyword">new</span> Originator();</span><br><span class="line">caretaker.addMemento(originator.createMemento(<span class="string">'b'</span>));</span><br><span class="line">originator.setMemento(caretaker.setMemento());</span><br><span class="line"><span class="built_in">console</span>.log(originator.state);</span><br></pre></td></tr></table></figure>
<ul>
<li><a name="Observer">Observer（观察者模式）：</a>定义对象间的一种一对多的依赖关系,以便当一个对象的状态发生改变时,所有依赖于它的对象都得到通知并自动刷新。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"># Observer.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Subject Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    attach(observer) &#123;</span><br><span class="line">        <span class="keyword">this</span>.observers.push(observer);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Subject.attach invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dettach(observer) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Subject.dettach invoked'</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> <span class="keyword">this</span>.observers) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.observers[i] === observer) &#123;</span><br><span class="line">                <span class="keyword">this</span>.observers.splice(i, <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    notify() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Subject.notify invoked'</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> <span class="keyword">this</span>.observers) &#123;</span><br><span class="line">            <span class="keyword">this</span>.observers[i].update(<span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteSubject</span> <span class="keyword">extends</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.subjectState = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">this</span>.observers = [];</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteSubject Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    getState() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteSubject.getState invoked'</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.subjectState;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    setState(state) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteSubject.setState invoked'</span>);</span><br><span class="line">        <span class="keyword">this</span>.subjectState = state;</span><br><span class="line">        <span class="keyword">this</span>.notify();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Observer Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    update() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Observer.update invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteObserver</span> <span class="keyword">extends</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.observerState = <span class="string">''</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteObserver Class created'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    update(Subject) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteObserver.update invoked'</span>);</span><br><span class="line">        <span class="keyword">this</span>.observerState = Subject.getState();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Observer new state: '</span> + <span class="keyword">this</span>.observerState);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> observer1 = <span class="keyword">new</span> ConcreteObserver();</span><br><span class="line"><span class="keyword">var</span> observer2 = <span class="keyword">new</span> ConcreteObserver();</span><br><span class="line"><span class="keyword">var</span> subject = <span class="keyword">new</span> ConcreteSubject();</span><br><span class="line">subject.attach(observer1);</span><br><span class="line">subject.attach(observer2);</span><br><span class="line">subject.setState(<span class="string">'state 1'</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li><a name="State">State（状态模式）：</a>允许一个对象在其内部状态改变时改变它的行为。对象看起来似乎修改了它所属的类。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"># State.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Context</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(state) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"Context Class created"</span>);</span><br><span class="line">        <span class="keyword">switch</span> (state) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"A"</span>:</span><br><span class="line">                <span class="keyword">this</span>.state = <span class="keyword">new</span> ConcreteStateA()</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">case</span> <span class="string">"B"</span>:</span><br><span class="line">                <span class="keyword">this</span>.state = <span class="keyword">new</span> ConcreteStateB()</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">this</span>.state = <span class="keyword">new</span> ConcreteStateA()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    request() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Context.request invoked'</span>);</span><br><span class="line">        <span class="keyword">this</span>.state.handle(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">State</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"State Class created"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handle() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'State.handle invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteStateA</span> <span class="keyword">extends</span> <span class="title">State</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"ConcreteStateA Class created"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handle(context) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteStateA.handle invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteStateB</span> <span class="keyword">extends</span> <span class="title">State</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"ConcreteStateB Class created"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handle(context) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteStateB.handle invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> context = <span class="keyword">new</span> Context(<span class="string">"A"</span>)</span><br><span class="line">context.request()</span><br></pre></td></tr></table></figure>
<ul>
<li><a name="Strategy">Strategy（策略模式）：</a>定义一系列的算法,把它们一个个封装起来, 并且使它们可相互替换。本模式使得算法的变化可独立于使用它的客户。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"># Strategy.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Context</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(type) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Context Class created!'</span>);</span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"A"</span>:</span><br><span class="line">                <span class="keyword">this</span>.strategy = <span class="keyword">new</span> ConcreteStrategyA()</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">case</span> <span class="string">"B"</span>:</span><br><span class="line">                <span class="keyword">this</span>.strategy = <span class="keyword">new</span> ConcreteStrategyB()</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">this</span>.strategy = <span class="keyword">new</span> ConcreteStrategyA()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    contextInterface() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Context.contextInterface invoked'</span>);</span><br><span class="line">        <span class="keyword">this</span>.strategy.algorithmInterface()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Strategy</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Strategy Class created!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    algorithmInterface() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Strategy.algorithmInterface invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteStrategyA</span> <span class="keyword">extends</span> <span class="title">Strategy</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteStrategyA Class created!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    algorithmInterface() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteStrategyA.algorithmInterface invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteStrategyB</span> <span class="keyword">extends</span> <span class="title">Strategy</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteStrategyB Class created!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    algorithmInterface() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteStrategyB.algorithmInterface invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> contextA = <span class="keyword">new</span> Context(<span class="string">"A"</span>);</span><br><span class="line">contextA.contextInterface();</span><br><span class="line"><span class="keyword">let</span> contextB = <span class="keyword">new</span> Context(<span class="string">"B"</span>);</span><br><span class="line">contextB.contextInterface();</span><br></pre></td></tr></table></figure>
<ul>
<li><a name="Template_Method">Template Method（模版方法模式）：</a>定义一个操作中的算法的骨架，而将一些步骤延迟到子类中。Template Method使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"># Template Method.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AbstractClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'AbstractClass Class created!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    templateMethod() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'AbstractClass.templateMethod invoked'</span>);</span><br><span class="line">        <span class="keyword">this</span>.primitiveOperation1();</span><br><span class="line">        <span class="keyword">this</span>.primitiveOperation2();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    primitiveOperation1() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'AbstractClass.primitiveOperation1 invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    primitiveOperation2() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'AbstractClass.primitiveOperation2 invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteClass</span> <span class="keyword">extends</span> <span class="title">AbstractClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteClass Class created!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    primitiveOperation1() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteClass.primitiveOperation1 invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    primitiveOperation2() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteClass.primitiveOperation2 invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = <span class="keyword">new</span> ConcreteClass();</span><br><span class="line">obj.templateMethod();</span><br></pre></td></tr></table></figure>
<ul>
<li><a name="Visitor">Visitor（访问者模式）：</a>表示一个作用于某对象结构中的各元素的操作。它使你可以在不改变各元素的类的前提下定义作用于这些元素的新操作。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"># Visitor.js</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Visitor</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Visitor Class created!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    visitConcreteElementA(ConcreteElementA) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Visitor.visitConcreteElementA invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    visitConcreteElementB(ConcreteElementB) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Visitor.visitConcreteElementB invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteVisitor1</span> <span class="keyword">extends</span> <span class="title">Visitor</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteVisitor1 Class created!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    visitConcreteElementA(ConcreteElementA) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteVisitor1.visitConcreteElementA invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    visitConcreteElementB(ConcreteElementB) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteVisitor1.visitConcreteElementB invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteVisitor2</span> <span class="keyword">extends</span> <span class="title">Visitor</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteVisitor2 Class created!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    visitConcreteElementA(ConcreteElementA) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteVisitor2.visitConcreteElementA invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    visitConcreteElementB(ConcreteElementB) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteVisitor2.visitConcreteElementB invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ObjectStructure</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ObjectStructure Class created!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Element</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Element Class created!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Accept(visitor) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Element.visitConcreteElementB invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteElementA</span> <span class="keyword">extends</span> <span class="title">Element</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteElementA Class created!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    accept(visitor) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteElementA.accept invoked'</span>);</span><br><span class="line">        visitor.visitConcreteElementA(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    operationA() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteElementA.operationA invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteElementB</span> <span class="keyword">extends</span> <span class="title">Element</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteElementB Class created!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    accept(visitor) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteElementB.accept invoked'</span>);</span><br><span class="line">        visitor.visitConcreteElementB(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    operationB() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ConcreteElementB.operationB invoked'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> visitor1 = <span class="keyword">new</span> ConcreteVisitor1();</span><br><span class="line"><span class="keyword">let</span> visitor2 = <span class="keyword">new</span> ConcreteVisitor2();</span><br><span class="line"><span class="keyword">let</span> elementA = <span class="keyword">new</span> ConcreteElementA();</span><br><span class="line"><span class="keyword">let</span> elementB = <span class="keyword">new</span> ConcreteElementB();</span><br><span class="line">elementA.accept(visitor1);</span><br><span class="line">elementB.accept(visitor2);</span><br></pre></td></tr></table></figure></div><div class="tags"><a href="/tags/javascript/">javascript</a></div><div class="post-nav"><a class="pre" href="/posts/3064957524.html">百万英雄题库（持续更新...）</a><a class="next" href="/posts/994796909.html">PHP相关名词通俗解释</a></div><div id="container"></div><link rel="stylesheet" href="/css/default.css?v=0.0.0"><script src="/js/gitment.browser.js?v=0.0.0"></script><script>var gitment = new Gitment({
  owner: 'LLwanran',
  repo: 'llwanran.github.io',
  oauth: {
    client_id: '2f18504cd0c0328ecfca',
    client_secret: '85c551f021ff75959321a9e15fdc8bc6579581ae',
  },
})
gitment.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="https://llwanran.github.io"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/百万英雄/">百万英雄</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/nosql/" style="font-size: 15px;">nosql</a> <a href="/tags/模块/" style="font-size: 15px;">模块</a> <a href="/tags/PHP/" style="font-size: 15px;">PHP</a> <a href="/tags/javascript/" style="font-size: 15px;">javascript</a> <a href="/tags/html/" style="font-size: 15px;">html</a> <a href="/tags/css/" style="font-size: 15px;">css</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/posts/663360563.html">如何优雅的选择字体(font-family)</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/2439514917.html">Webpack之配置说明</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/3064957524.html">百万英雄题库（持续更新...）</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/1842989949.html">Javascript常用的设计模式</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/994796909.html">PHP相关名词通俗解释</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/3063279979.html">浅析Memcached, Redis, MongoDB三者的区别</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/1099660432.html">javascript中模块的发展历程</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.zhuanke.cn/" title="赚客 - 靠谱的手机赚钱APP" target="_blank">赚客 - 靠谱的手机赚钱APP</a><ul></ul><a href="http://www.xyou.cn/" title="X游网 - 手机网页游戏平台" target="_blank">X游网 - 手机网页游戏平台</a><ul></ul><a href="http://www.lianka.cn/" title="链咖 - 互动式效果广告营销" target="_blank">链咖 - 互动式效果广告营销</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">婉然一笑 - Li的兰花指.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  //- hm.src = '//hm.baidu.com/hm.js?' + theme.baidu_analytics;
  hm.src = "https://hm.baidu.com/hm.js?f5e094d366a07bd863ad017bafd70681";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>